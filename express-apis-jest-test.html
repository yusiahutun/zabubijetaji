<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to Test Express APIs With Jest - GleamBlog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Testing, while it can be time-consuming, is an important step in the development cycle of any application. It ensures you catch bugs and issues early on before you push code to production. You can use Jest to test an Express Rest API. After youve created a simple CRUD API, discover how to write tests for"><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="How to Test Express APIs With Jest"><meta property="og:description" content="Testing, while it can be time-consuming, is an important step in the development cycle of any application. It ensures you catch bugs and issues early on before you push code to production. You can use Jest to test an Express Rest API. After youve created a simple CRUD API, discover how to write tests for"><meta property="og:type" content="article"><meta property="og:url" content="/express-apis-jest-test.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-05T00:00:00+00:00"><meta itemprop=name content="How to Test Express APIs With Jest"><meta itemprop=description content="Testing, while it can be time-consuming, is an important step in the development cycle of any application. It ensures you catch bugs and issues early on before you push code to production. You can use Jest to test an Express Rest API. After youve created a simple CRUD API, discover how to write tests for"><meta itemprop=datePublished content="2024-04-05T00:00:00+00:00"><meta itemprop=dateModified content="2024-04-05T00:00:00+00:00"><meta itemprop=wordCount content="1424"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=GleamBlog rel=home><div class="logo__item logo__text"><div class=logo__title>GleamBlog</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>How to Test Express APIs With Jest</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-04-05T00:00:00Z>April 05, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><img src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2022/07/pexels-malte-luk-5310455.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>Testing, while it can be time-consuming, is an important step in the development cycle of any application. It ensures you catch bugs and issues early on before you push code to production.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can use Jest to test an Express Rest API. After you’ve created a simple CRUD API, discover how to write tests for each endpoint.</p><h2 id=what-is-jest>What Is Jest?</h2><p>There are many JavaScript testing libraries that you can choose from, but <a href=# rel="noopener noreferrer">Jest</a> is the easiest to start with. It is a testing library developed by Facebook, mostly used to test React projects. However, you can also use it to test Node and other JavaScript-based projects. It was developed on top of Jasmine, another testing tool, and comes bundled with its own assertion library.</p><p>While you won’t need an assertion library to write tests in Jest, you will need to use a tool to make HTTP requests. This article uses SuperTest.</p><h2 id=what-is-supertest>What Is SuperTest?</h2><p><a href=# rel="noopener noreferrer">SuperTest</a> is a Node testing library for HTTP calls. It extends the superagent testing library and allows you to make requests like GET, POST, PUT, and DELETE.</p><p>SuperTest provides a request object you can use to make HTTP requests.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre><code class="hljs xml"><span class=hljs-keyword>const</span> request = <span class=hljs-built_in>require</span>(<span class=hljs-string>"supertest"</span>)<br>request(<span class=hljs-string>"https://icanhazdadjoke.com"</span>)<br>.get(<span class=hljs-string>'/slack'</span>)<br>.end(<span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>err, res</span>) </span>{<br> <span class=hljs-keyword>if</span> (err) <span class=hljs-keyword>throw</span> err;<br> <span class=hljs-selector-tag>console</span><span class=hljs-selector-class>.log</span>(<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.body</span><span class=hljs-selector-class>.attachments</span>);<br>});<br></code> </pre><p>Here, you pass the base URL of the API to the request object and then chain the HTTP method with the rest of the URL. The <strong>end()</strong> method calls the API server and the callback function handles its response.</p><p>Once you get the response from the API, you can use Jest to validate it.</p><h2 id=create-an-express-api>Create an Express API</h2><p>To test your own API endpoints, you need to create <a href=#>a REST API</a> first. The API you will create is quite simple. It inserts, retrieves, updates, and deletes items from an array.</p><p>Begin by creating a new directory called node-jest and initializing npm.</p><pre><code class="hljs xml">mkdir node-jest<br>npm init -y<br></code> </pre><p>Next, create a new file called <strong>index.js</strong> and <a href=#>create the Express server</a>.</p><pre><code class="hljs xml"><span class=hljs-keyword>const</span> express = <span class=hljs-built_in>require</span>(<span class=hljs-string>"express"</span>)<br><span class=hljs-keyword>const</span> app = express()<br>app.listen(<span class=hljs-number>3000</span>, () =&gt; <span class=hljs-built_in>console</span>.log(<span class=hljs-string>"Listening at port 3000"</span>))<br></code> </pre><h2 id=test-the-get-todos-endpoint>Test the GET /todos Endpoint</h2><p>The first endpoint you will create is the GET /todos endpoint. It returns all the items in the array. In index.js, add the following.</p><pre><code class="hljs xml"><span class=hljs-keyword>const</span> todos = [<br>];<br><span class=hljs-comment>// Get all todos</span><br>app.get(<span class=hljs-string>"/todos"</span>, (req, res) =&gt; {<br>&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(200)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;data: todos,<br>&nbsp;&nbsp;&nbsp;&nbsp;error: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;});<br>});<br></code> </pre><p>Note the response has a status code of 200 and a JSON object containing the to-dos item in an array called data and an error message. This is what you will test using Jest.</p><p>Now, install Jest and SuperTest:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre><code class="hljs xml">npm <span class=hljs-keyword>install</span> jest supertest<br></code> </pre><p>Then, add a test script in <strong>package.json</strong> as follows:</p><pre><code class="hljs xml">{<br>&nbsp;&nbsp;<span class=hljs-string>"scripts"</span>: {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-string>"test"</span>: <span class=hljs-string>"jest"</span><br>&nbsp;&nbsp;}<br>}<br></code> </pre><p>Before you start writing your own tests, you should understand how to write a basic test in Jest.</p><p>Consider the following function:</p><pre><code class="hljs xml"><span class=hljs-function><span class=hljs-keyword>function</span>&nbsp;<span class=hljs-title>sum</span>(<span class=hljs-params>a, b</span>) </span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>return</span> a + b;<br>}<p><span class=hljs-keyword>module</span>.<span class=hljs-keyword>exports</span> = sum;<br></p></code> </pre><p>In the test file, you need to:</p><ul><li>Import the function.</li><li>Describe what the test should do.</li><li>Call the function.</li><li>Assert the expected response with the actual response from the function.</li></ul><pre><code class="hljs xml"><span class=hljs-keyword>const</span> { sum } = <span class=hljs-built_in>require</span>(<span class=hljs-string>"./sum"</span>)<p>describe(<span class=hljs-string>"Sum of two items"</span>, <span class=hljs-keyword>async</span>() =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;test(<span class=hljs-string>"It should return 4"</span>, () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>sum</span>(2,2))<span class=hljs-selector-class>.toBe</span>(4)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br></p></code> </pre><p>The <strong>describe</strong> keyword specifies the group of tests and the <strong>test</strong> statement specifies the specific test. If the value returned from the function matches the value passed to <strong>toBe</strong>, the test passes.</p><p>When testing API endpoints, you won’t be calling a function but sending a request using SuperTest or another HTTP client library.</p><p>Returning to the GET endpoint, create a new file called <strong>api.test.js</strong>. This is where you will write all the endpoint tests. Naming the test file with a <strong>.test</strong> infix ensures that Jest recognizes it as a test file.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>In api.test.js, import supertest and set the base URL like so:</p><pre><code class="hljs xml"><span class=hljs-keyword>const</span> request = <span class=hljs-built_in>require</span>(<span class=hljs-string>"supertest"</span>)<br><span class=hljs-keyword>const</span> baseURL = <span class=hljs-string>"http://localhost:3000"</span><br></code> </pre><p>Next, create the first test in the describe block:</p><pre><code class="hljs xml">describe(<span class=hljs-string>"GET /todos"</span>, () =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>const</span> newTodo = {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>id</span>: <span class=hljs-selector-tag>crypto</span><span class=hljs-selector-class>.randomUUID</span>(),<br>&nbsp;&nbsp;&nbsp;&nbsp;item: <span class=hljs-string>"Drink water"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;completed: <span class=hljs-literal>false</span>,<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;beforeAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-comment>// set up the todo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).post(<span class=hljs-string>"/todo"</span>).send(newTodo);<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;afterAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).delete(<span class=hljs-string>`/todo/<span class=hljs-subst>${newTodo.id}</span>`</span>)<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;it(<span class=hljs-string>"should return 200"</span>, <span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> response = <span class=hljs-keyword>await</span> request(baseURL).get(<span class=hljs-string>"/todos"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>response</span><span class=hljs-selector-class>.statusCode</span>)<span class=hljs-selector-class>.toBe</span>(200);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>response</span><span class=hljs-selector-class>.body</span><span class=hljs-selector-class>.error</span>)<span class=hljs-selector-class>.toBe</span>(<span class=hljs-selector-tag>null</span>);<br>&nbsp;&nbsp;});<br>&nbsp;&nbsp;it(<span class=hljs-string>"should return todos"</span>, <span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> response = <span class=hljs-keyword>await</span> request(baseURL).get(<span class=hljs-string>"/todos"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;expect(response.body.data.length &gt;= <span class=hljs-number>1</span>).toBe(<span class=hljs-literal>true</span>);<br>&nbsp;&nbsp;});<br>});<br></code> </pre><p>Before running the tests, you will need to define setup and teardown functions. These functions will populate the todo array with an item before the test and delete the dummy data after each test.</p><p>The code that runs before all the tests is in the beforeAll() function. The code that runs after all the tests is in the afterAll() function.</p><p>In this example, you are simply hitting the POST and DELETE endpoints for each. In a real application, you would probably connect to a mock database containing the test data.</p><p>In this test, you first made a request to the GET /todos endpoint and compared the response sent back to the expected results. This test suite will pass if the response has an <a href=#>HTTP status code</a> of 200, the data is not empty, and the error message is null.</p><h2 id=test-the-post-todo-endpoint>Test the POST /todo Endpoint</h2><p>In index.js, create the POST /todo endpoint:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre><code class="hljs xml">app.post(<span class=hljs-string>"/todo"</span>, (req, res) =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>try</span> {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> { id, item, completed } = req.body;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> newTodo = {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;completed,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>todos</span><span class=hljs-selector-class>.push</span>(<span class=hljs-selector-tag>newTodo</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(201)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: todos,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;} <span class=hljs-keyword>catch</span> (error) {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(500)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: error,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br>});<br></code> </pre><p>In this test, you will need to send the todo details in the request body using the send() method.</p><pre><code class="hljs xml">request(baseURL).post(<span class=hljs-string>"/todo"</span>).send(newTodo)<br></code> </pre><p>The POST /todo request should return a 201 status code and the todos array with the new item added at the end. Here is what the test might look like:</p><pre><code class="hljs xml">describe(<span class=hljs-string>"POST /todo"</span>, () =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>const</span> newTodo = {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-comment>// todo </span><br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;afterAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).delete(<span class=hljs-string>`/todo/<span class=hljs-subst>${newTodo.id}</span>`</span>)<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;it(<span class=hljs-string>"should add an item to todos array"</span>, <span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> response = <span class=hljs-keyword>await</span> request(baseURL).post(<span class=hljs-string>"/todo"</span>).send(newTodo);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> lastItem = response.body.data[response.body.data.length<span class=hljs-number>-1</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>response</span><span class=hljs-selector-class>.statusCode</span>)<span class=hljs-selector-class>.toBe</span>(201);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>lastItem</span><span class=hljs-selector-class>.item</span>)<span class=hljs-selector-class>.toBe</span>(<span class=hljs-selector-tag>newTodo</span><span class=hljs-selector-attr>[<span class=hljs-string>"item"</span>]</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>lastItem</span><span class=hljs-selector-class>.completed</span>)<span class=hljs-selector-class>.toBe</span>(<span class=hljs-selector-tag>newTodo</span><span class=hljs-selector-attr>[<span class=hljs-string>"completed"</span>]</span>);<br>&nbsp;&nbsp;});<br>});<br></code> </pre><p>Here, you are passing the todo data to the send() method as an argument. The response should have a 201 status code and also contain all the todo items in a data object. To test whether todo was actually created, check whether the last entry in the returned todos matches the one you sent in the request.</p><p>The PUT /todos/:id endpoint should return the updated item:</p><pre><code class="hljs xml">app.put(<span class=hljs-string>"/todos/:id"</span>, (req, res) =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>try</span> {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> id = req.params.id<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> todo = todos.find(<span class=hljs-function>(<span class=hljs-params>todo</span>) =&gt;</span> todo.id == id);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!todo) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>throw</span>&nbsp;<span class=hljs-keyword>new</span>&nbsp;<span class=hljs-built_in>Error</span>(<span class=hljs-string>"Todo not found"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;todo.completed = req.body.completed;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(201)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: todo,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;} <span class=hljs-keyword>catch</span> (error) {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(500)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: error,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br>});<br></code> </pre><p>Test the response as follows:</p><pre><code class="hljs xml">describe(<span class=hljs-string>"Update one todo"</span>, () =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>const</span> newTodo = {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-comment>// todo </span><br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;beforeAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).post(<span class=hljs-string>"/todo"</span>).send(newTodo);<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;afterAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).delete(<span class=hljs-string>`/todo/<span class=hljs-subst>${newTodo.id}</span>`</span>)<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;it(<span class=hljs-string>"should update item if it exists"</span>, <span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> response = <span class=hljs-keyword>await</span> request(baseURL).put(<span class=hljs-string>`/todos/<span class=hljs-subst>${newTodo.id}</span>`</span>).send({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;completed: <span class=hljs-literal>true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>response</span><span class=hljs-selector-class>.statusCode</span>)<span class=hljs-selector-class>.toBe</span>(201);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>expect</span>(<span class=hljs-selector-tag>response</span><span class=hljs-selector-class>.body</span><span class=hljs-selector-class>.data</span><span class=hljs-selector-class>.completed</span>)<span class=hljs-selector-class>.toBe</span>(<span class=hljs-selector-tag>true</span>);<br>&nbsp;&nbsp;});<br>});<br></code> </pre><p>The completed value in the response body should be true. Remember to include the id of the item you want to update in the URL.</p><h2 id=test-the-delete-todos-id-endpoint>Test the DELETE /todos/:id Endpoint</h2><p>In index.js, create the DELETE endpoint. It should return the todo data without the deleted item.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><pre><code class="hljs xml">app.delete(<span class=hljs-string>"/todos/:id"</span>, (req, res) =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>try</span> { <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> id = req.params.id<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> todo = todos[<span class=hljs-number>0</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;if(todo) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>todos</span><span class=hljs-selector-class>.splice</span>(<span class=hljs-selector-tag>id</span>, 1)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(200)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: todos,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;} <span class=hljs-keyword>catch</span> (error) {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-selector-tag>return</span>&nbsp;<span class=hljs-selector-tag>res</span><span class=hljs-selector-class>.status</span>(500)<span class=hljs-selector-class>.json</span>({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: <span class=hljs-literal>null</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error: error,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br>});<br></code> </pre><p>To test the endpoint, you can check whether the deleted item still exists in the returned data:</p><pre><code class="hljs xml">describe(<span class=hljs-string>"Delete one todo"</span>, () =&gt; {<br>&nbsp;&nbsp;<span class=hljs-keyword>const</span> newTodo = {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-comment>// todo</span><br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;beforeAll(<span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>await</span> request(baseURL).post(<span class=hljs-string>"/todo"</span>).send(newTodo);<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;it(<span class=hljs-string>"should delete one item"</span>, <span class=hljs-keyword>async</span> () =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> response = <span class=hljs-keyword>await</span> request(baseURL).delete(<span class=hljs-string>`/todos/<span class=hljs-subst>${newTodo.id}</span>`</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> todos = response.body.data<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword>const</span> exists = todos.find(<span class=hljs-function><span class=hljs-params>todo</span> =&gt;</span> {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newTodo.id == todoId<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;expect(exists).toBe(<span class=hljs-literal>undefined</span>)<br>&nbsp;&nbsp;});<br>});<br></code> </pre><p>The data returned from the DELETE endpoint should not contain the deleted item. Since the returned items are in an array, you can use Array[id] to check whether the API deleted the item correctly. The result should be false.</p><h2 id=creating-rest-apis>Creating REST APIs</h2><p>In this article, you learned how to test an Express Rest API using Jest API. You wrote tests for the GET, PUT, POST, and DELETE HTTP requests and saw how to send data to the endpoint in the URL and the request. You should be able to apply this knowledge when testing your own Rest API.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7rq3KnqysnZ%2Bbe6S7zGicsaiimsC0ecCpoKxlmprAtXnTnqqtZw%3D%3D</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./tess-daly-unrecognisable-figure-flattering-jeans.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Tess Daly looks unrecognisable with short bob and figure-flattering jeans in throwback photo</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./hardy-tops-the-list-of-nominees-for-the-2023-acm-awards.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Hardy Tops The List Of Nominees For The 2023 ACM Awards</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./1-651-lake-j-day-1-sliding-rock.html>#1,651 Lake J Day 1 + Sliding Rock. Laurel Mercantile</a></li><li class=widget__item><a class=widget__link href=./celebrity-haircuts-every-age-0610.html>Celebrity Haircuts for Every Age</a></li><li class=widget__item><a class=widget__link href=./dave-and-sugar-singer-dave-rowland-dead-stroke.html>Dave &amp;amp; Sugar Singer Dave Rowland Dead at 74</a></li><li class=widget__item><a class=widget__link href=./nars-climax-mascara-review.html>NARS Climax Mascara Is Editor-Approved and Here's Why</a></li><li class=widget__item><a class=widget__link href=./whos-richest-member-wynners-net-worths-ranked-hong-kong.html>Whos the richest member of The Wynners? Net worths, ranked, from Hong Kong Canto-pop legends Alan</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 GleamBlog.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>