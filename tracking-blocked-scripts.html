<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Tracking Blocked Scripts Chris Coyier - GleamBlog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="If you have a reference to a script in JavaScript you think might be blocked Before you add it to the page, you can add an error handler: Then kick it off If youre trying to detect this from tags in the HTML, you can still get a reference to it the script element, but"><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="Tracking Blocked Scripts  Chris Coyier"><meta property="og:description" content="If you have a reference to a script in JavaScript you think might be blocked Before you add it to the page, you can add an error handler: Then kick it off If youre trying to detect this from tags in the HTML, you can still get a reference to it the script element, but"><meta property="og:type" content="article"><meta property="og:url" content="/tracking-blocked-scripts.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-05-27T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-27T00:00:00+00:00"><meta itemprop=name content="Tracking Blocked Scripts  Chris Coyier"><meta itemprop=description content="If you have a reference to a script in JavaScript you think might be blocked Before you add it to the page, you can add an error handler: Then kick it off If youre trying to detect this from tags in the HTML, you can still get a reference to it the script element, but"><meta itemprop=datePublished content="2024-05-27T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-27T00:00:00+00:00"><meta itemprop=wordCount content="294"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=GleamBlog rel=home><div class="logo__item logo__text"><div class=logo__title>GleamBlog</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Tracking Blocked Scripts Chris Coyier</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-05-27T00:00:00Z>May 27, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><img src=https://cdn.statically.io/img/i0.wp.com/chriscoyier.net/wp-content/uploads/2021/07/IsUISvAq_400x400.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>If you have a reference to a script in JavaScript you think might be blocked…</p><pre class=wp-block-code aria-describedby=shcb-language-1 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript"><span class=hljs-keyword>const</span> script = <span class=hljs-built_in>document</span>.createElement(<span class=hljs-string>"script"</span>); script.src = <span class=hljs-string>`https://probably-blocked.com/foo`</span>;</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>Before you add it to the page, you can add an error handler:</p><pre class=wp-block-code aria-describedby=shcb-language-2 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript">script.onerror = <span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> { };</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>Then kick it off…</p><pre class=wp-block-code aria-describedby=shcb-language-3 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript"><span class=hljs-built_in>document</span>.querySelector(<span class=hljs-string>'head'</span>)?.append(script);</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>If you’re trying to detect this from <code>&lt;script></code> tags in the HTML, you can still get a reference to it the script element, but you’d have to get that reference before it tries to execute to catch the error, so whatever, do that if you want.</p><p>If the script is blocked, you’ll probably get some message like this in the console:</p><pre class="wp-block-code has-vivid-red-color has-text-color" aria-describedby=shcb-language-4 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript">GET https:</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>That’ll throw that <code>onerror</code> and you’ll be in a position to track it or respond to it if you want.</p><p>The trick on tracking is that you’ll want to use an analytics situation that won’t also be blocked. So if you’re hoping to send an event to Google Analytics or something, well, that’s not going to work very well.</p><p>I just made this mistake while running a test on CodePen to see how many calls to our advertising platform BuySellAds were being blocked. To count the blocks, I sent an event to another service we use called Appcues, thinking that Appcues isn’t an advertising service so it wouldn’t be blocked. Well, Appcues is third-party JavaScript (we don’t proxy it as we could), and some ad blockers block it. So at first, it looked like about 10% of the BuySellAds scripts were being blocked. But after replacing how we were tracking the blocks with an internal service (just a little Redis counter), it was showing more like 28% of scripts being blocked.</p><p><h3 class=jp-relatedposts-headline>Related</h3></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmibmKe2tK%2FOsqCeql6jsrV7kWlpbGdganxyg46tqZqbm567qHnBpaaco5WZerSv0aKnratf</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./blake-shelton-walk-of-fame-speech-gwen-stefani-2023.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Blake Shelton's Speech About Gwen Stefani Leaves Her in Tears</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./tiffany-pollard-found-out-she-was-pregnant-but-not-married-yet-find-out-her-relationship-and-her-boyfriend.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Tiffany Pollard reveal dating Atkion LA Jackson back in 2016, is the couple planning to get married</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./1-651-lake-j-day-1-sliding-rock.html>#1,651 Lake J Day 1 + Sliding Rock. Laurel Mercantile</a></li><li class=widget__item><a class=widget__link href=./celebrity-haircuts-every-age-0610.html>Celebrity Haircuts for Every Age</a></li><li class=widget__item><a class=widget__link href=./dave-and-sugar-singer-dave-rowland-dead-stroke.html>Dave &amp;amp; Sugar Singer Dave Rowland Dead at 74</a></li><li class=widget__item><a class=widget__link href=./nars-climax-mascara-review.html>NARS Climax Mascara Is Editor-Approved and Here's Why</a></li><li class=widget__item><a class=widget__link href=./whos-richest-member-wynners-net-worths-ranked-hong-kong.html>Whos the richest member of The Wynners? Net worths, ranked, from Hong Kong Canto-pop legends Alan</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 GleamBlog.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>